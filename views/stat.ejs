<!DOCTYPE html/><html ng-app="statApp"><head>    <title><%= title %></title>    <% styles.forEach(function (style) { %>    <link rel="stylesheet" href="<%= style %>"/>    <% }) %>    <script type="text/javascript">        var themeColour = 'white';    </script>    <% scripts.forEach(function (script) { %>    <script type="text/javascript" src="<%= script %>"></script>    <% }) %></head><body><div class="stat" ng-controller="statCtrl">    <div class="stat-nav">        <ul class="nav nav-tabs" role="tablist">            <li class="dropdown">                <a class="dropdown-toggle" data-toggle="dropdown" href="#"> 添加 datasource <span                            class="caret"></span></a>                <ul class="dropdown-menu" role="menu">                    <li ng-repeat="dataSource in unSelectedDataSource()" ng-click="addDataSource(dataSource)"><a href="#">{{dataSource.name}}</a></li>                </ul>            </li>            <li class="dropdown">                <a class="dropdown-toggle" data-toggle="dropdown" href="#">                    选择 period<span class="caret"></span>                </a>                <ul class="dropdown-menu datasource-menu" role="menu">                    <li ng-repeat="period in periodTypes"><a href="#" ng-click="setPeriod(period.value)">{{period.text}}</a></li>                </ul>            </li>        </ul>        <div class="new-datasource">            <h4>                <span class="new-datasource-wrapping" ng-repeat="dataSource in selectedDataSources">                    <span class="label label-primary">{{dataSource.name}}</span>                    <a href="" ng-click="delDataSource(dataSource)" class="glyphicon glyphicon-remove"></a>                </span>                <span ng-show="isChanged">                    <label type="submit" class="btn btn-sm btn-primary" ng-click="ok()" ng-disabled="widgetEditForm.$invalid">确定</label>                </span>            </h4>        </div>    </div>    <div class="stat-chart" data-config='<%= JSON.stringify(widget.config) %>'>        <div class="content">        </div>    </div>    <div class="stat-data" ng-show="isDataAlready">        <div class="panel panel-info">            <div class="panel-heading">                <h3 class="panel-title">历史数据（{{ ((multiRecords[0] || {}).records || []).length }}条记录）</h3>            </div>            <div class="panel-body">                <table class="table table-hover">                    <thead>                    <tr>                        <td>时间</td>                        <td class="space"></td>                        <td ng-repeat="obj in multiRecords">{{obj.dataSource.name}}</td>                    </tr>                    </thead>                    <tbody>                        <tr ng-repeat="record in (multiRecords[0] || {}).records" ng-init="recordIndex = $index">                            <td>{{ record.time.getFullYear() }}年{{ record.time.getMonth() }}月{{ record.time.getDate() }}日&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ record.time.getHours() || '00'}}                                :{{ record.time.getMinutes() || '00'}}:{{ record.time.getSeconds() || '00' }}</td>                            <td class="space"></td>                            <td ng-repeat="obj in multiRecords">{{ obj.records[recordIndex].value }}</td>                        </tr>                    </tbody>                </table>            </div>        </div>    </div></div></body></html>